<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               x:Class="TFGMultiplatform.Views.Components.NewExerciseForm"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               xmlns:ur="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
               CanBeDismissedByTappingOutsideOfPopup="False"
               Color="Transparent">
    <VerticalStackLayout Padding="30" 
                         Spacing="20" 
                         HorizontalOptions="Center" 
                         VerticalOptions="Center"
                         HeightRequest="600"
                         WidthRequest="800">
        <!-- Frame principal con sombra y bordes redondeados -->
        <Frame BackgroundColor="White"
               CornerRadius="15"
               Padding="20"
               HasShadow="True"
               BorderColor="#E0E0E0">
            <!-- Usamos un Grid para posicionar el botón de cierre en la esquina superior derecha -->
            <Grid>
                <!-- Definimos filas y columnas para el Grid -->
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Botón de cierre en la esquina superior derecha -->
                <Button Grid.Row="0"
                        Grid.Column="1"
                        Text="✕"
                        BackgroundColor="Transparent"
                        TextColor="#757575" 
                        FontSize="20"
                        FontFamily="Arial"
                        Padding="0"
                        WidthRequest="30"
                        HeightRequest="30"
                        HorizontalOptions="End"
                        VerticalOptions="Start"
                        Clicked="OnCloseTabClicked" 
                        BorderColor="Transparent"
                        StyleClass="ElevatedButton" />

                    <!-- Contenido del formulario -->
                    <VerticalStackLayout Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Spacing="15">
                        <!-- Encabezado -->
                        <Frame BackgroundColor="#E3F2FD" 
                           CornerRadius="10" 
                           Padding="10" 
                           Margin="0,0,0,10">
                            <HorizontalStackLayout>
                                <Label Text="Nuevo Ejercicio" 
                                   VerticalOptions="Center" 
                                   FontSize="18" 
                                   FontAttributes="Bold"
                                   TextColor="#1976D2" />
                            </HorizontalStackLayout>
                        </Frame>

                        <!-- Campos del formulario -->
                        <VerticalStackLayout Spacing="20">
                            <ur:TextField x:Name="entryExerciseName" 
                                      Title="Ejercicio" 
                                      AllowClear="True" 
                                      AccentColor="#1976D2"
                                      BackgroundColor="#F5F5F5"
                                      CornerRadius="10"
                                      Padding="10"
                                      TextColor="#212121"
                                      TitleColor="#757575"/>
                            <ur:TextField x:Name="entrySeries" 
                                      Title="Series" 
                                      AllowClear="True" 
                                      AccentColor="#1976D2"
                                      BackgroundColor="#F5F5F5"
                                      CornerRadius="10"
                                      Padding="10"
                                      TextColor="#212121"
                                      TitleColor="#757575"/>
                            <ur:TextField x:Name="entryRepetitions" 
                                      Title="Repeticiones" 
                                      AllowClear="True" 
                                      AccentColor="#1976D2"
                                      BackgroundColor="#F5F5F5"
                                      CornerRadius="10"
                                      Padding="10"
                                      TextColor="#212121"
                                      TitleColor="#757575"/>
                            <ur:TextField x:Name="entryWeight" 
                                      Title="Peso (kg)" 
                                      AllowClear="True" 
                                      AccentColor="#1976D2"
                                      BackgroundColor="#F5F5F5"
                                      CornerRadius="10"
                                      Padding="10"
                                      TextColor="#212121"
                                      TitleColor="#757575"/>

                            <!-- Botones de acción -->
                            <HorizontalStackLayout HorizontalOptions="Center" Spacing="15">
                                <Button Text="Guardar" 
                                    Clicked="OnSaveNewExercise" 
                                    StyleClass="ElevatedButton" 
                                    TextColor="White" 
                                    BackgroundColor="#1976D2" 
                                    WidthRequest="150"
                                    HeightRequest="50"
                                    CornerRadius="25"
                                    FontSize="16"
                                    FontAttributes="Bold"/>
                                <Button Text="Cancelar" 
                                    Clicked="OnCloseForm" 
                                    StyleClass="ElevatedButton" 
                                    TextColor="White" 
                                    BackgroundColor="#B0BEC5" 
                                    WidthRequest="150"
                                    HeightRequest="50"
                                    CornerRadius="25"
                                    FontSize="16"
                                    FontAttributes="Bold"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
            </Grid>
        </Frame>
    </VerticalStackLayout>
</toolkit:Popup>